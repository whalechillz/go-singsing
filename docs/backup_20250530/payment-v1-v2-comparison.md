# 결제 관리 시스템 V1 vs V2 비교

## 기능 비교표

| 기능 | V1 (기존) | V2 (개선) | 비고 |
|-----|-----------|-----------|------|
| **기본 결제 관리** | ✅ | ✅ | 완전 호환 |
| **그룹 일괄 결제** | ✅ | ✅ | 개선됨 |
| **영수증 요청** | ✅ | ✅ | 종류 선택 추가 |
| **계약금/잔금 구분** | ❌ | ✅ | 신규 기능 |
| **결제 상태 관리** | ❌ | ✅ | 신규 기능 |
| **환불 처리** | ❌ | ✅ | 신규 기능 |
| **대시보드** | 기본 통계 | 상세 대시보드 | 대폭 개선 |
| **참가자별 현황** | 미결제자만 | 완납/부분/미납 | 개선됨 |
| **금액 자동 계산** | ❌ | ✅ | 신규 기능 |
| **결제일 관리** | ❌ | ✅ | 신규 기능 |

## 주요 개선사항

### 1. UI/UX 개선
- **V1**: 단순한 테이블 형태
- **V2**: 프로페셔널한 대시보드 + 상세 테이블

### 2. 결제 구분 추가
```javascript
// V1: 금액만 입력
amount: 800000

// V2: 자동 계산
payment_type: 'deposit' // 30% 자동 계산
payment_type: 'balance' // 70% 자동 계산
payment_type: 'full'    // 100%
```

### 3. 상태 관리
```javascript
// V1: 상태 없음
// V2: 명확한 상태 관리
payment_status: 'completed' // 완료
payment_status: 'pending'   // 대기
payment_status: 'cancelled' // 취소
payment_status: 'refunded'  // 환불
```

### 4. 환불 프로세스
- **V1**: 수동 삭제 또는 메모
- **V2**: 전용 환불 모달 + 사유 기록

## 데이터 호환성

### payment_method 매핑
```javascript
// V1 → V2
'deposit' → 'bank' (계좌이체)
'card' → 'card' (카드)
'cash' → 'cash' (현금)
```

### 기본값 설정
- `payment_type`: 기존 데이터는 'deposit'로 설정
- `payment_status`: 기존 데이터는 'completed'로 설정
- `payment_date`: 기존 데이터는 created_at 사용

## 사용자 교육 필요사항

### 1. 계약금/잔금 프로세스
1. 첫 결제 시: "계약금(30%)" 선택
2. 잔금 받을 때: "잔금(70%)" 선택
3. 전액 받을 때: "전액" 선택

### 2. 환불 처리
1. 결제 목록에서 환불 버튼(🔄) 클릭
2. 환불 사유 입력
3. 환불 처리 (되돌릴 수 없음)

### 3. 결제 현황 확인
- 상단 대시보드: 전체 현황
- 하단 요약: 참가자별 상태

## 주의사항

### 1. 환불 처리
- 환불 처리는 **되돌릴 수 없음**
- 환불 사유 **필수 입력**
- 환불된 금액은 총 수입에서 제외

### 2. 그룹 결제
- 계약금과 잔금은 **별도로 처리**
- 그룹 멤버 변경 시 기존 결제 영향 없음

### 3. 기존 데이터
- 모든 기존 데이터는 정상 표시
- 수정 시 새로운 필드 자동 추가

## FAQ

### Q: 기존 결제 데이터는 어떻게 표시되나요?
A: 모든 기존 데이터는 "계약금" + "완료" 상태로 표시됩니다.

### Q: 계약금만 받은 사람을 어떻게 찾나요?
A: 하단의 "참가자별 결제 현황"에서 "계약금만 납부" 섹션을 확인하세요.

### Q: 환불을 잘못 처리했어요.
A: 환불은 취소할 수 없습니다. 필요시 새로운 결제를 추가하세요.

### Q: 영수증 종류가 더 필요해요.
A: 현재 세금계산서/현금영수증/간이영수증을 지원합니다. 추가 필요시 개발팀에 요청하세요.