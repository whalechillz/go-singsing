# 공지사항 템플릿 시스템 사용 가이드

## 🚀 개요

공지사항 템플릿 시스템은 자주 사용하는 공지사항을 데이터베이스에 저장하고, 필요할 때 빠르게 불러와서 사용할 수 있는 기능입니다.

## 📋 주요 기능

### 1. 템플릿 관리
- **위치**: 관리자 메뉴 > 공지사항 템플릿
- **기능**:
  - 템플릿 생성/수정/삭제
  - 카테고리별 분류 (날씨/환불, 결제, 일정, 긴급 등)
  - 변수 설정 (매니저 전화번호, 투어명 등 자동 치환)
  - 메시지용 짧은 버전 관리

### 2. 통합 표지에서 사용
- **위치**: 투어 문서 링크 관리 > 통합 표지 만들기/수정
- **사용법**:
  1. 특별공지사항 입력란 우측 상단 "템플릿" 버튼 클릭
  2. 원하는 템플릿 선택
  3. 변수 값 자동/수동 입력
  4. 적용 버튼 클릭

### 3. 메시지 발송에서 사용
- **위치**: 고객 관리 > 메시지 발송
- **사용법**:
  1. 메시지 내용 입력란 우측 상단 "공지 템플릿" 버튼 클릭
  2. 템플릿 선택 (SMS는 짧은 버전 우선 사용)
  3. 변수 값 입력
  4. 적용

## 🔧 설치 방법

```bash
# 1. 실행 권한 부여
chmod +x apply-notice-templates-migration.sh

# 2. 마이그레이션 실행
./apply-notice-templates-migration.sh
```

## 📝 템플릿 예시

### 우천시 환불 안내
```
☔ 우천시 환불 규정 안내

【출발 전 취소】
• 출발 당일 우천 예보 시: 전액 환불
• 취소 결정: 출발 2시간 전 최종 확정

【라운딩 중 우천】
• 9홀 미만 플레이: 그린피 70% 환불
• 9홀 이상 플레이: 홀아웃 정산표 기준 적용

문의: 담당 매니저 {{manager_phone}}
```

**메시지용 짧은 버전:**
```
[우천환불] 출발전 취소시 전액환불, 라운딩중 우천시 홀아웃정산. 자세한 내용은 링크 확인 {{portal_link}}
```

### 식음료 결제 안내
```
💳 골프장 내 식음료 결제 안내

【결제 원칙】
• 골프장 식당 이용 금액: 당일 결제 필수
• 룸/바 이용 금액: 당일 또는 익일 오전까지 결제
• 미결제 시 출발이 지연될 수 있습니다

문의: {{hotel_front}} 또는 담당 매니저
```

## 💡 활용 팁

### 1. 변수 활용
- `{{manager_phone}}`: 담당 매니저 연락처
- `{{driver_phone}}`: 기사님 연락처
- `{{tour_name}}`: 투어명
- `{{hotel_front}}`: 호텔 프론트 번호

### 2. 카테고리 활용
- **날씨/환불**: 우천, 태풍 관련 공지
- **결제**: 식음료, 추가비용 안내
- **일정**: 시간 변경, 일정 조정
- **긴급**: 즉시 전달이 필요한 공지

### 3. 상황별 조합
- 우천 예보 시: 우천 환불 + 비상 연락처
- 투어 중: 식음료 결제 + 내일 일정
- 투어 시작: 드레스코드 + 조식 시간

## 🎯 실제 사용 예시

### 시나리오 1: 우천 예보 + 식음료 결제 안내

1. 문서 링크 관리 > 통합 표지 수정
2. 템플릿 버튼 클릭
3. "우천시 환불 안내" 선택 → 적용
4. 다시 템플릿 버튼 클릭
5. "식음료 결제 안내" 선택 → 적용
6. 저장

결과:
```
🚨 긴급공지사항

☔ 우천시 환불 규정 안내
[전체 내용]

---

💳 골프장 내 식음료 결제 안내
[전체 내용]
```

### 시나리오 2: 총무들에게 메시지 발송

1. 메시지 발송 페이지
2. "공지 템플릿" 버튼 클릭
3. "우천시 환불 안내" 선택
4. SMS 선택 시 자동으로 짧은 버전 사용
5. 총무 선택 후 발송

## ❓ 자주 묻는 질문

**Q: 템플릿을 수정하면 기존에 사용한 공지도 바뀌나요?**
A: 아니요. 템플릿을 적용하는 순간의 내용이 복사되므로, 이후 템플릿을 수정해도 기존 공지는 그대로 유지됩니다.

**Q: 변수는 어떻게 치환되나요?**
A: 투어 정보나 스탭 정보에서 자동으로 불러오며, 없는 경우 직접 입력할 수 있습니다.

**Q: 메시지 발송 시 글자 수 제한은?**
A: SMS는 90바이트, LMS는 2000바이트입니다. 템플릿의 "짧은 버전"을 활용하세요.

## 📞 문의

개발팀에 추가 템플릿이 필요하거나 기능 개선이 필요한 경우 요청해 주세요.
