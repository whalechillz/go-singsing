# 회원 관리 시스템 설계

## 개요
싱싱골프투어의 회원 관리는 크게 두 가지로 구분됩니다.

## 1. 전체 참가자 관리 (현재 구현됨)
투어에 실제 참가한 고객들을 관리하는 시스템

### 주요 기능
- **참가자 목록**: 투어별/전체 참가자 조회 및 관리
- **결제 관리**: 참가자별 결제 상태 관리
- **동반자 관리**: 그룹 참가자의 동반자 정보 통합 관리
- **일괄 결제**: 그룹 대표자의 일괄 결제 처리

### 특징
- 투어 예약과 직접 연결
- 결제 이력 추적
- 투어별 참가 이력 관리
- 동반자 정보와 일괄 결제 옵션 통합 UI

### 최근 개선사항 (2025-01-27)
- **동반자 정보 UI 통합**: 그룹 일괄 결제 체크박스를 동반자 정보 섹션 내부로 이동
- **동반자 정보 표시 버그 수정**: 수정 모드에서 그룹 인원수와 동반자 배열 크기 자동 조정
- **동반자 관리 기능 강화**: 
  - 개별 동반자 삭제 버튼 추가
  - 그룹 인원수 감소 시 데이터 손실 경고 메시지
  - 그룹 인원수 변경 시 기존 동반자 정보 보존
- **총 결제 금액 자동 계산**: 일괄 결제 선택 시 투어 가격 × 그룹 인원수 자동 표시

## 2. 전체회원 관리 (향후 개발)
모든 잠재 고객 및 회원을 관리하는 통합 시스템

### 포함 대상
1. **투어 참가자** (전체 참가자 관리와 연동)
2. **문의 고객** (투어 미참가)
3. **회원가입 고객** 
4. **잠재 고객** (홍보 대상)

### 주요 기능 (예정)
- 회원 가입/로그인 시스템
- 고객 정보 통합 관리
- 고객 등급 관리 (VIP, 일반 등)
- 마케팅 동의 관리

## 3. 알림톡 시스템 (향후 개발)

### 3.1 홍보용 알림톡
- **대상**: 전체회원 (마케팅 동의자)
- **내용**: 신규 투어 안내, 프로모션, 이벤트
- **관리**: 전체회원 관리 시스템에서 관리

### 3.2 투어 관련 알림톡
- **대상**: 투어 참가자
- **내용**: 
  - 예약 확인
  - 결제 안내 (예약금/잔금)
  - 투어 일정 리마인더
  - 탑승 안내
- **관리**: 전체 참가자 관리 시스템에서 관리

## 데이터 연동 구조

```
[전체회원 관리]
    ├── 회원가입 고객
    ├── 문의 고객
    └── 투어 참가자 ─────┐
                        │
[전체 참가자 관리] ◄────┘
    ├── 참가자 목록
    └── 결제 관리
```

## 구현 우선순위
1. ✅ 전체 참가자 관리 (완료)
2. ✅ 결제 관리 (기반 구축 완료)
3. 🔲 투어 관련 알림톡
4. 🔲 전체회원 관리 시스템
5. 🔲 홍보용 알림톡

## 기술 고려사항
- 회원 인증: Supabase Auth 활용
- 알림톡: 카카오 비즈메시지 API 연동
- 데이터 동기화: 참가자 정보와 회원 정보 연동
